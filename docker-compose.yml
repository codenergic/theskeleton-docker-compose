version: '3'
services:
  ui:
    container_name: theskeleton-ui-admin
    image: codenergic/theskeleton-ui-admin:latest
    ports:
      - 9000:9000
    environment:
      PORT: 9000
      PUBLIC_PATH:
      SERVER_URL: http://localhost:8080
    depends_on:
      - server
  server:
    container_name: theskeleton-server
    image: codenergic/theskeleton:latest
    ports:
      - 8080:8080
    environment:
      S3_CLIENT_ENDPOINT: http://s3:9000
      SPRING_DATASOURCE_URL: jdbc:h2:/data/db/theskeleton
    depends_on:
      - s3
    volumes:
      - data:/data
  s3:
    container_name: theskeleton-s3
    image: minio/minio
    ports:
      - 9001:9000
    expose:
      - 9000
    environment:
      MINIO_ACCESS_KEY: supersecret
      MINIO_SECRET_KEY: supersecret123
    command: server /data/files
    volumes:
      - data:/data
volumes:
  data:
